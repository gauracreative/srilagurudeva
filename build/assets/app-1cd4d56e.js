import{m as o}from"./module.esm-a9f152bb.js";const u=i=>({data:i,loaded:20,statuses:{},languages:{},countries:{},filter:{country:!1,language:!1,status:!1,sort:"name"},init(){this.updateDDs(!0),this.loadMore()},updateDDs(a=!1){const n=new Map,e=new Map,s=new Map;this.getFiltered().forEach(t=>{a&&t.country!==void 0&&t.country!==null&&t.country!==""&&n.set(t.country,(n.get(t.country)||0)+1),t.status!==void 0&&t.status!==null&&t.status!==""&&e.set(t.status,(e.get(t.status)||0)+1),t.language!==void 0&&t.language!==null&&t.language!==""&&s.set(t.language,(s.get(t.language)||0)+1)}),a&&(this.countries=Array.from(n.entries()).sort((t,r)=>r[1]-t[1])),this.statuses=Array.from(e.entries()).sort((t,r)=>r[1]-t[1]),this.languages=Array.from(s.entries()).sort((t,r)=>r[1]-t[1])},getFiltered(){const a=n=>!(this.filter.country&&n.country!==this.filter.country||this.filter.status&&n.status!==this.filter.status||this.filter.language&&n.language!==this.filter.language);return this.data.filter(a)},getItems(){const a=this.getFiltered();return this.updateDDs(),a.length<=this.loaded?a:a.slice(0,this.loaded)},loadMore(){window.addEventListener("scroll",()=>{const a=window.scrollY,n=window.innerHeight,e=document.body.clientHeight,s=200;a+n>=e-s&&(this.loaded+=4)})},reset(){this.filter={country:!1,language:!1,status:!1,sort:"name"}}}),f=i=>({data:i,loaded:20,countries:{},roles:{},relations:{},filter:{country:!1,role:!1,relation:!1,sort:"name"},init(){this.updateDDs(!0),this.loadMore()},updateDDs(a=!1){const n=new Map,e=new Map,s=new Map;this.getFiltered().forEach(t=>{a&&t.country!==void 0&&t.country!==null&&t.country!==""&&n.set(t.country,(n.get(t.country)||0)+1),t.roles!==void 0&&t.roles!==null&&t.roles!==""&&e.set(t.roles,(e.get(t.roles)||0)+1),t.relation!==void 0&&t.relation!==null&&t.relation!==""&&s.set(t.relation,(s.get(t.relation)||0)+1)}),a&&(this.countries=Array.from(n.entries()).sort((t,r)=>r[1]-t[1])),this.roles=Array.from(e.entries()).sort((t,r)=>r[1]-t[1]),this.relations=Array.from(s.entries()).sort((t,r)=>r[1]-t[1])},getFiltered(){const a=n=>!(this.filter.country&&n.country!==this.filter.country||this.filter.role&&n.roles!==this.filter.role||this.filter.relation&&n.relation!==this.filter.relation);return this.data.filter(a)},getItems(){const a=this.getFiltered();return this.updateDDs(),a.length<=this.loaded?a:a.slice(0,this.loaded)},loadMore(){window.addEventListener("scroll",()=>{const a=window.scrollY,n=window.innerHeight,e=document.body.clientHeight,s=200;a+n>=e-s&&(this.loaded+=4)})},reset(){this.filter={country:!1,language:!1,status:!1,sort:"name"}}}),d=()=>({user:!1,current:!1,all:!1,deleteMarkUpdate(){this.user?(this.current=!0,this.all=!0):this.all&&(this.current=!0)}}),c=(i,a,n)=>({data:i,reviewers:a,reviewersData:n,tab:"gram",loaded:20,languages:{},countries:{},filter:{country:!1,language:!1,sort:"name"},init(){this.updateDDs(!0),this.loadMore()},updateDDs(e=!1){const s=new Map,t=new Map;this.getFiltered().forEach(r=>{e&&r.country!==void 0&&r.country!==null&&r.country!==""&&s.set(r.country,(s.get(r.country)||0)+1),r.language!==void 0&&r.language!==null&&r.language!==""&&t.set(r.language,(t.get(r.language)||0)+1)}),e&&(this.countries=Array.from(s.entries()).sort((r,l)=>l[1]-r[1])),this.languages=Array.from(t.entries()).sort((r,l)=>l[1]-r[1])},getFiltered(){const e=s=>this.filter.country&&s.country!==this.filter.country||this.filter.language&&s.language!==this.filter.language||this.tab==="gram"&&!["admin","grammatic"].includes(s.type)?!1:!(this.tab==="sidh"&&!["admin","sidhantic"].includes(s.type));return this.data.filter(e)},getItems(){const e=this.getFiltered();return this.updateDDs(),e.length<=this.loaded?e:e.slice(0,this.loaded)},getReviewers(){const e=s=>this.tab==="gram"&&s.type!=="grammatic"?!1:!(this.tab==="sidh"&&s.type!=="sidhantic");return this.reviewers.filter(e)},loadMore(){window.addEventListener("scroll",()=>{const e=window.scrollY,s=window.innerHeight,t=document.body.clientHeight,r=200;e+s>=t-r&&(this.loaded+=4)})},reset(){this.filter={country:!1,language:!1,sort:"name"}},selected(e){this.tab=e;const s=this.$el.parentNode.parentNode,t=["border-l","border-t","border-r","rounded-t","font-semibold"];document.querySelectorAll(".tabs").forEach(r=>{r.style.display="none"}),e=["gram","sidh"].includes(e)?"reviews":e,document.getElementById(e+"Tab").style.display="block",s.querySelectorAll("li").forEach(r=>{r.classList.remove("-mb-px")}),s.querySelectorAll("li button").forEach(r=>{r.classList.remove(...t)}),this.$el.parentNode.classList.add("-mb-px"),this.$el.classList.add(...t)},media(e,s){return s=s.replace("000",e.id),e.media?'Yes, <a class="text-indigo-700 font-semibold" href="'+s+'" title="move">move</a>':""},tabTitle(e){let s=this.data.filter(t=>t.type===e.toLowerCase()).length;return`For ${e} Review (${s})`},sum(e){return this.reviewersData.reduce((s,t)=>(t[e]&&(s+=parseInt(t[e])),s),0)}}),g=(i,a)=>({data:i,url:a,offering:{id:0,name:"",email:"",location:"",summary:"",country:0,type:0,status:0,language:0,tags:[]},status:{message:"",error:!1},init(){this.offering.id=this.data.id,this.offering.name=this.data.name,this.offering.email=this.data.email,this.offering.location=this.data.location,this.offering.summary=this.data.summary,this.offering.country=this.data.country,this.offering.type=this.data.type,this.offering.status=this.data.status,this.offering.language=this.data.lang,this.offering.tags=this.data.tags?this.data.tags.split(","):[]},submit(){editor.save().then(n=>{const e=new FormData;e.append("_token",document.querySelector('meta[name="csrf-token"]').content),e.append("blocks",JSON.stringify(n)),e.append("id",this.offering.id),e.append("name",this.offering.name),e.append("email",this.offering.email),e.append("country",this.offering.country),e.append("location",this.offering.location),e.append("type",this.offering.type),e.append("summary",this.offering.summary),e.append("language",this.offering.language),e.append("status",this.offering.status),e.append("tags",this.offering.tags),fetch(this.url,{method:"POST",body:e}).then(s=>s.json()).then(s=>{s.res=="ok"?(this.status.error=!1,this.status.message=s.message):s.res=="error"&&(this.status.error=!0,this.status.message=s.message)})}).catch(n=>{console.log("Saving failed: ",n)})},reset(){this.offering={name:"",email:"",location:"",summary:"",country:0,type:0,status:0,language:0}}});window.Alpine=o;o.data("all",u);o.data("users",f);o.data("user",d);o.data("assign",c);o.data("edits",g);o.start();
